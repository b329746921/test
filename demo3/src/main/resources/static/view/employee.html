<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>employee</title>
    <script src="/util/jquery.js"></script>
    <script>
        function queryEmployee(id) {
            $.get(
                "/job/list",
                false,
                function (result) {
                    $("#employee_form").append("职工号:<input type='text' id='employeeNo' name='employeeNo'></input> " +
                        "姓名:<input type='text' id='employeeName' name='employeeName'></input> " +
                        "职务:<select id='jobId' name='jobId'></select>" +
                        "<button onclick='modEmployee()'>确认修改</button>");
                    for(let i in result){
                        $("#jobId").append("<option value='"+result[i].id+"'>"+result[i].jobName+"</option>")
                    }
                }
            )
            $.get(
                "/employee/get",
                {"id":id},
                function (result) {
                    $("#employeeNo").val(result.employeeNo)
                    $("#employeeName").val(result.employeeName)
                    $("#jobId").val(result.jobId)
                }
            )

            $.get(
                "/job/list",
                function (result) {
                    $("#job").append("<option value=''></option>")
                }
            )
        }

        function modEmployee() {
            $.post(
                "/employee/mod",
                $("#Employee_form").serialize(),
                function (result) {

                }
            )
        }

        function remEmployee(id) {
            $.post(
                "/employee/rem",
                {"id":id},
                function (result) {

                }
            )
        }
        $(function () {
            $.get(
                "/employee/list",
                function (result) {
                    for(let i in result){
                        $("#employee_table").append("<tr>" +
                            "<th>"+result[i].employeeNo+"</th>" +
                            "<th>"+result[i].employeeName+"</th>" +
                            "<th>"+result[i].jobId+"</th>" +
                            "<th><a href='javascript:void(0);' onclick='queryEmployee()'>修改</a> <a href='javascript:void(0);' onclick='remEmployee()'>删除</a></th>" +
                            "</tr>")
                    }
                }
            )
        })
    </script>
</head>
<body>
<a href="/">返回</a>
<table id="employee_table">
    <tr>
        <th>职工号</th>
        <th>姓名</th>
        <th>职务</th>
        <th>操作</th>
    </tr>
</table>
<form id="employee_form">

</form>
</body>
</html>